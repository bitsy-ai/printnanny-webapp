# Generated by Django 3.2.12 on 2022-08-01 15:41

from django.db import migrations, models
import print_nanny_webapp.utils.fields


class Migration(migrations.Migration):

    dependencies = [
        ("alerts", "0007_auto_20220716_2146"),
    ]

    operations = [
        migrations.AlterModelOptions(
            name="printprogressalert",
            options={"base_manager_name": "objects"},
        ),
        migrations.RemoveConstraint(
            model_name="printprogressalert",
            name="unique_print_progress_alert",
        ),
        migrations.RemoveConstraint(
            model_name="printstatusalert",
            name="unique_print_status_alert",
        ),
        migrations.RemoveConstraint(
            model_name="videostatusalert",
            name="unique_video_status_alert",
        ),
        migrations.RemoveField(
            model_name="alertmessage",
            name="octoprint_device",
        ),
        migrations.RemoveField(
            model_name="alertmessage",
            name="print_session",
        ),
        migrations.RemoveField(
            model_name="printprogressalert",
            name="octoprint_device",
        ),
        migrations.RemoveField(
            model_name="printprogressalert",
            name="print_session",
        ),
        migrations.RemoveField(
            model_name="printstatusalert",
            name="octoprint_device",
        ),
        migrations.RemoveField(
            model_name="printstatusalert",
            name="print_session",
        ),
        migrations.RemoveField(
            model_name="videostatusalert",
            name="octoprint_device",
        ),
        migrations.RemoveField(
            model_name="videostatusalert",
            name="print_session",
        ),
        migrations.AlterField(
            model_name="alertmessage",
            name="alert_method",
            field=models.CharField(
                choices=[
                    ("UI", "Print Nanny UI"),
                    ("EMAIL", "Email notifications"),
                    ("DISCORD", "Discord channel (webhook)"),
                ],
                max_length=255,
            ),
        ),
        migrations.AlterField(
            model_name="alertsettings",
            name="alert_methods",
            field=print_nanny_webapp.utils.fields.ChoiceArrayField(
                base_field=models.CharField(
                    choices=[
                        ("UI", "Print Nanny UI"),
                        ("EMAIL", "Email notifications"),
                        ("DISCORD", "Discord channel (webhook)"),
                    ],
                    max_length=255,
                ),
                blank=True,
                default=("E", "M", "A", "I", "L"),
                size=None,
            ),
        ),
        migrations.AlterField(
            model_name="alertsettings",
            name="event_types",
            field=print_nanny_webapp.utils.fields.ChoiceArrayField(
                base_field=models.CharField(
                    choices=[
                        ("PrintQuality", "Quality control alerts"),
                        (
                            "PrintStatus",
                            "Print status updates (percent progress, paused, resumed, failed)",
                        ),
                    ],
                    max_length=255,
                ),
                blank=True,
                default=["PrintQuality", "PrintStatus"],
                size=None,
            ),
        ),
        migrations.AlterField(
            model_name="printprogressalert",
            name="alert_method",
            field=models.CharField(
                choices=[
                    ("UI", "Print Nanny UI"),
                    ("EMAIL", "Email notifications"),
                    ("DISCORD", "Discord channel (webhook)"),
                ],
                max_length=36,
            ),
        ),
        migrations.AlterField(
            model_name="printstatusalert",
            name="alert_method",
            field=models.CharField(
                choices=[
                    ("UI", "Print Nanny UI"),
                    ("EMAIL", "Email notifications"),
                    ("DISCORD", "Discord channel (webhook)"),
                ],
                max_length=36,
            ),
        ),
        migrations.AlterField(
            model_name="testalert",
            name="alert_method",
            field=models.CharField(
                choices=[
                    ("UI", "Print Nanny UI"),
                    ("EMAIL", "Email notifications"),
                    ("DISCORD", "Discord channel (webhook)"),
                ],
                max_length=36,
            ),
        ),
        migrations.AlterField(
            model_name="videostatusalert",
            name="alert_method",
            field=models.CharField(
                choices=[
                    ("UI", "Print Nanny UI"),
                    ("EMAIL", "Email notifications"),
                    ("DISCORD", "Discord channel (webhook)"),
                ],
                max_length=36,
            ),
        ),
        migrations.AddConstraint(
            model_name="printstatusalert",
            constraint=models.UniqueConstraint(
                fields=("alert_method", "event_type"), name="unique_print_status_alert"
            ),
        ),
        migrations.AddConstraint(
            model_name="videostatusalert",
            constraint=models.UniqueConstraint(
                fields=("alert_method", "event_type"), name="unique_video_status_alert"
            ),
        ),
    ]
